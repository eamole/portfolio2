<h2>Image Map - Client Side</h2>

<style></style>

<div class="intro">	
    To make this work, please click on
    <ul>
        <li>Macroom</li>
        <li>Bantry</li>
        <li>Cork Airport</li>
        <li>Cork Harbour</li>
    </ul>
</div>
<div id="info"></div>

<!-- Image Map Generated by http://www.image-map.net/ -->
<img src="/static/img/home-map-1.png" usemap="#image-map" class="image">

<map name="image-map" id="image-map">
    <area id="macroom" target="_self" alt="Macroom" title="Macroom" href="#macroom" 
        	coords="335,253,9" shape="circle">
    <area id="bantry" target="_self" alt="Bantry" title="Bantry" href="#bantry" 
        coords="200,329,16" shape="circle">
    <area id="cork-airport" target="_self" alt="Cork Airport" title="Cork Airport" href="#cork-airport" 
        coords="454,332,529,392" shape="rect">

    <!-- 
            I will add this to the image map dynamically below
            
            <area id="cork-harbour" 
            target="_self" 
            alt="Cork Harbour" 
            title="Cork Harbour" href="#cork-harbour" 
            coords="479,285,479,270,475,254,463,246,455,235,470,244,479,244,495,244,509,239,501,253,495,261,489,269" 
            shape="poly"> 
    -->
</map>

<script>

    /*
        create a table of info so we can display something after a click on the area map
        we should probably store ALL the data into the info object and generate the html 
        via a script....so all the data comes from a data source, not hard coded HTML
        that would require us to change the "info" structure to contain not just strings
        but structured obejcts with data such as co-ords, alt, title etc parameters 
        see "cork harbour" below
    */
    let locations = {
        "macroom" : "This is information about Macroom. It is 20 miles from Cork City on the road to Killarney......",
        "bantry" : "This is the westernmost town in Cork County. It is a traditional fishing village.....",
        "cork-airport": "Is an aiport!!",
        "cork-harbour": {   // custom, non-string object
            id: "cork-harbour",     //clickable via ID
            name: "Cork Harbour",
            info: "This is God's county",
            coords: "479,285,479,270,475,254,463,246,455,235,470,244,479,244,495,244,509,239,501,253,495,261,489,269",
            shape: "poly"
        }
    }

    let areaMapClickHandler = function () { // use function syntax to get "this"...ie the clicked area map
        // NBB : inside here, "this" refers to the "area" element that has been clicked - because of the "function" syntax"
        //extract data from the DOM element itself, and display it
        let html = `
            <div class="header">${this.title}</div>
        `
        // now extract data from the "info" js obect above - using the element id property to find it
        let id = this.id
        let info = locations[id]        // get the info by ID
        // now add whatever info to the existing HTML - use += to add to existing content
        if (typeof info !== "string") info = info.info  // extract the indiv property that is the equiv of the strings used in other info entries
        html += `
            <div class="info">${info}</div>
        ` 
        $("#info").html(html)       // insert the HTML with info inserted
    }

    // add a standard click handler for each area map - use our defined func above (we need to use it twice - see custom info handlers below)
    $("#image-map area").click(areaMapClickHandler) // NBB the selector : area elements within #image-map


    // add cork harbour as a dynamic element....
    /*
        <area id="cork-harbour" 
            target="_self" 
            alt="Cork Harbour" 
            title="Cork Harbour" 
            href="#cork-harbour" 
            coords="479,285,479,270,475,254,463,246,455,235,470,244,479,244,495,244,509,239,501,253,495,261,489,269" 
            shape="poly">   

    */
    
    let generateImageMaps = () => {
        // assume more tha one
        let html = ""
        for(const key of Object.keys(locations)) {
            let location = locations[key]
            if(typeof location !== "string") {  // only for info where it's an object, not a string
                html += generateImageMap(location)
            }
        }
        $("#image-map").append(html)    // add new map(s) as a child - insert once where possible
        $(".custom-location-area-map").click(areaMapClickHandler)   // we re-use same handler as above
    }
    let generateImageMap = (location) => { // call this function to extract map info from "info" variable 

        // generate the HTML for "Cork Harbour" in the image map HTML
        let html = `
            <area id="${location.id}" 
                target="_self" 
                class="custom-location-area-map" // this allows us to add a click handler after insertion
                alt="${location.name}" 
                title="${location.name}" 
                href="#${location.id}" 
                coords="${location.coords}" 
                shape="${location.shape}"/>    
        `
    return html
   }
   generateImageMaps();


</script>
